// Module included in the following assemblies:
//
// * cloud_service/installing_cloud_other/init-bundle-cloud-other-apply.adoc
// * cloud_service/installing_cloud_ocp/init-bundle-cloud-ocp-apply.adoc
// * installing/installing_ocp/init-bundle-ocp.adoc
// * installing/installing_other/init-bundle-other.adoc

//Conditionals to show ocp commands for OpenShift, kube commands for Kubernetes, Central language for non-cloud
ifeval::["{context}" == "init-bundle-cloud-ocp"]
:openshift:
endif::[]

ifeval::["{context}" == "init-bundle-ocp"]
:openshift:
endif::[]

ifeval::["{context}" == "init-bundle-other"]
:kube:
endif::[]

ifeval::["{context}" == "init-bundle-cloud-other-apply"]
:kube:
endif::[]

ifeval::["{context}" == "init-bundle-cloud-other-apply"]
:cloud:
endif::[]

ifeval::["{context}" == "init-bundle-cloud-ocp-apply"]
:openshift:
endif::[]

ifeval::["{context}" == "init-bundle-cloud-ocp-apply"]
:cloud:
endif::[]

:_content-type: PROCEDURE
[id="create-resource-init-bundle_{context}"]
= Creating resources by using the init bundle

//Do not show for ACSCS
ifndef::cloud[]
Before you install secured clusters, you must use the init bundle to create the required resources on the cluster that will allow the services on the secured clusters to communicate with Central.
endif::[]

//Show for ACSCS
ifdef::cloud[]
Before you install secured clusters, you must use the init bundle to create the required resources on the cluster that will allow the services on the secured clusters to communicate with {product-title-managed-short}.
endif::[]

[NOTE]
====
If you are installing by using Helm charts, do not perform this step. Complete the installation by using Helm; See "Installing
{product-title-short} on secured clusters by using Helm charts" in the additional resources section.
====

.Prerequisites
* You must have generated an init bundle containing secrets.

.Procedure
ifdef::openshift[]
To create resources, perform one of the following steps:

* In the {ocp} web console, in the top menu, click *+* to open the *Import YAML* page. You can drag the init bundle file or copy and paste its contents into the editor, and then click *Create*.

* Using the {osp} CLI, run the following command to create the resources:
+
[source,terminal]
----
$ oc create -f <init_bundle>.yaml \ <1>
  -n <stackrox> <2>
----
<1> Specify the file name of the init bundle containing the secrets.
<2> Specify the name of the project where Central services are installed.
endif::[]
ifdef::kube[]
* Using the `kubectl` CLI, run the following commands to create the resources:
+
[source,terminal]
----
$ kubectl create namespace stackrox <1>
$ kubectl create -f <init_bundle>.yaml \ <2>
  -n <stackrox> <3>
----
<1> Create the project where secured cluster resources will be installed. This example uses `stackrox`.
<2> Specify the file name of the init bundle containing the secrets.
<3> Specify the project name that you created. This example uses `stackrox`.
endif::[]


.Next Step
* Install {product-title-short} secured cluster services in all clusters that you want to monitor.
